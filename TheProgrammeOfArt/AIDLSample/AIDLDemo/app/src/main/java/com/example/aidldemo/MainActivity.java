package com.example.aidldemo;import android.content.ComponentName;import android.content.Intent;import android.content.ServiceConnection;import android.os.Bundle;import android.os.IBinder;import android.os.Process;import android.os.RemoteException;import android.util.Log;import android.view.View;import android.widget.Button;import android.widget.TextView;import androidx.appcompat.app.AppCompatActivity;/** * 客户端 */public class MainActivity extends AppCompatActivity implements View.OnClickListener {	private IRemoteService mRemoteService = null;	private boolean mBind = false;	private TextView mPidText;	private static final String TAG = "WLY";	@Override	protected void onCreate(Bundle savedInstanceState) {		super.onCreate(savedInstanceState);		setContentView(R.layout.activity_main);		mPidText = findViewById(R.id.my_pid_text_view);		String content = "the client pid is "+ Process.myPid();		mPidText.setText(content);		Button showPidButton = findViewById(R.id.show_pid_button);		Button sayHelloButton = findViewById(R.id.say_hello_button);		showPidButton.setOnClickListener(this);		sayHelloButton.setOnClickListener(this);	}	@Override	protected void onStart() {		super.onStart();		Intent intent = new Intent(this, RemoteService.class);		bindService(intent,mConnection,BIND_AUTO_CREATE);	}	@Override	protected void onStop() {		super.onStop();		unbindService(mConnection);		mBind = false;	}	private ServiceConnection mConnection = new ServiceConnection() {		@Override		public void onServiceConnected(ComponentName componentName, IBinder service) {			//获取借口引用，这样客户端就可以通过它来对服务端发送请求了			mRemoteService = IRemoteService.Stub.asInterface(service);			mBind = true;		}		@Override		public void onServiceDisconnected(ComponentName componentName) {			mRemoteService = null;			mBind = false;		}	};	@Override	public void onClick(View view) {		switch (view.getId()){			case R.id.show_pid_button:				if (mBind){					try {						Log.i(TAG,"the service pid is "								+mRemoteService.sayHello().getPid());					} catch (RemoteException e) {						e.printStackTrace();					}				}				break;			case R.id.say_hello_button:				if (mBind){					try {						Log.i(TAG,mRemoteService.sayHello().getMsg());					} catch (RemoteException e) {						e.printStackTrace();					}				}				break;		}	}}